################################################################################
# Automatically generated via Ansible (Gleb E Goncharov <gongled@gongled.ru>)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
################################################################################

server {
    listen  80;

    ############################################################################

    server_name {{ item.key }};
{% if item.key.find('www') == -1 %}
    server_name www.{{ item.key }};
{% endif %}
{% if item.value.cart.storefronts is defined %}
{% for alias in item.value.cart.storefronts %}
    server_name {{ alias }};
{% if alias.find('www') == -1 %}
    server_name www.{{ alias }};
{% endif %}
{% endfor %}
{% endif %}

    ############################################################################

    charset utf-8;

    ############################################################################

    access_log  {{ nginx_role.logdir }}/{{ item.key }}/access.log extended;
    error_log   {{ nginx_role.logdir }}/{{ item.key }}/error.log;

    ############################################################################

    include xtra/error-40X.conf;
    include xtra/error-50X.conf;

    ############################################################################

    location / {
        proxy_pass http://backend;
        include xtra/proxy_params.conf;
    }

    ############################################################################
}
