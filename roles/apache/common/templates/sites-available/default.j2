################################################################################
# Automatically generated via Ansible (Gleb E Goncharov <gongled@gongled.ru>)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
################################################################################

<VirtualHost *:8080>
    ServerAdmin root@localhost
    ServerName {{ item.key }}
{% if item.key.find('www') == -1 %}
    ServerAlias www.{{ item.key }}
{% endif %}
{% if item.value.cart.storefronts is defined %}
{% for alias in item.value.cart.storefronts %}
    ServerAlias {{ alias }}
{% if alias.find('www') == -1 %}
    ServerAlias www.{{ alias }}
{% endif %}
{% endfor %}
{% endif %}
    ServerSignature Off

    ############################################################################

    CustomLog {{ apache_role.log }}/access.log combined
    ErrorLog  {{ apache_role.log }}/error.log
    LogLevel  warn

    ############################################################################

    DocumentRoot {{ item.value.cart.root }}

    <Directory />
        Options -Indexes +MultiViews +FollowSymlinks +SymLinksIfOwnerMatch +IncludesNoExec
        AllowOverride All
    </Directory>

    <Directory {{ item.value.cart.root }}>
        Options -Indexes +MultiViews +FollowSymlinks +SymLinksIfOwnerMatch +IncludesNoExec
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>

    ############################################################################

    <Directory ~ ".*\.svn">
        Order allow,deny
        Deny from all
        Satisfy All
    </Directory>

    <Directory ~ ".*\.git">
        Order allow,deny
        Deny from all
        Satisfy All
    </Directory>

    ############################################################################

    <IfModule mod_deflate.c>
        AddOutputFilterByType DEFLATE text/plain
        AddOutputFilterByType DEFLATE text/html
        AddOutputFilterByType DEFLATE text/xml
        AddOutputFilterByType DEFLATE text/css
        AddOutputFilterByType DEFLATE application/xml
        AddOutputFilterByType DEFLATE application/xhtml+xml
        AddOutputFilterByType DEFLATE application/rss+xml
        AddOutputFilterByType DEFLATE application/javascript
        AddOutputFilterByType DEFLATE application/x-javascript
    </IfModule>

    ############################################################################

    <IfModule mod_expires.c>
        ExpiresActive On
        ExpiresDefault "access plus 1 month"
    </IfModule>

    ############################################################################

    <IfModule mod_headers.c>
        <FilesMatch "\.(jpg|jpeg|gif|png|js|css)$">
            Header set Cache-control "public, max-age=86400"
        </FilesMatch>

        <FilesMatch "\.(ttf|ttc|otf|eot|woff|css)$">
            Header set Access-Control-Allow-Origin "*"
        </FilesMatch>
    </IfModule>

    ############################################################################

    <IfModule mod_setenvif.c>
        BrowserMatch ^Mozilla/4 gzip-only-text/html
        BrowserMatch ^Mozilla/4\.0[678] no-gzip
        BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
    </IfModule>

    ############################################################################

</VirtualHost>

################################################################################
