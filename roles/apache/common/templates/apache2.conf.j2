################################################################################
# Automatically generated via Ansible (Gleb E Goncharov <gongled@gongled.ru>)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
################################################################################

################################################################################

User ${APACHE_RUN_USER}
Group ${APACHE_RUN_GROUP}

Listen 127.0.0.1:8080

################################################################################

# LockFile ${APACHE_LOCK_DIR}/accept.lock
PidFile ${APACHE_PID_FILE}

################################################################################

Timeout 300
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 5

################################################################################

<IfModule mpm_prefork_module>
    StartServers          5
    MinSpareServers       5
    MaxSpareServers      10
    MaxClients          150
    MaxRequestsPerChild   0
</IfModule>

<IfModule mpm_worker_module>
    StartServers          2
    MinSpareThreads      25
    MaxSpareThreads      75
    ThreadLimit          64
    ThreadsPerChild      25
    MaxClients          150
    MaxRequestsPerChild   0
</IfModule>

<IfModule mpm_event_module>
    StartServers          2
    MinSpareThreads      25
    MaxSpareThreads      75
    ThreadLimit          64
    ThreadsPerChild      25
    MaxClients          150
    MaxRequestsPerChild   0
</IfModule>

################################################################################

AccessFileName .htaccess

<Files ~ "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy all
</Files>

################################################################################

DefaultType None
HostnameLookups Off

################################################################################

<IfModule mod_negotiation.c>
<IfModule mod_include.c>

    Alias /http-errors/ "{{ apache_role.path }}/html/"

    <Directory "{{ apache_role.path }}/html/">
        AllowOverride None
        Options IncludesNoExec
        AddOutputFilter Includes html
        AddHandler type-map var
        Order allow,deny
        Allow from all
        LanguagePriority en es de fr
        ForceLanguagePriority Prefer Fallback
    </Directory>

    ErrorDocument 400 /http-errors/401.html
    ErrorDocument 401 /http-errors/401.html
    ErrorDocument 403 /http-errors/403.html
    ErrorDocument 404 /http-errors/404.html
    ErrorDocument 405 /http-errors/401.html
    ErrorDocument 408 /http-errors/401.html
    ErrorDocument 410 /http-errors/401.html
    ErrorDocument 411 /http-errors/401.html
    ErrorDocument 412 /http-errors/401.html
    ErrorDocument 413 /http-errors/401.html
    ErrorDocument 414 /http-errors/401.html
    ErrorDocument 415 /http-errors/401.html
    ErrorDocument 500 /http-errors/50X.html
    ErrorDocument 501 /http-errors/50X.html
    ErrorDocument 502 /http-errors/502.html
    ErrorDocument 503 /http-errors/50X.html
    ErrorDocument 504 /http-errors/50X.html
</IfModule>
</IfModule>

################################################################################

ErrorLog ${APACHE_LOG_DIR}/error.log
LogLevel warn

LogFormat "%v:%p %h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" vhost_combined
LogFormat "%h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %O" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent

################################################################################

ServerName localhost

################################################################################

Include mods-enabled/*.load
Include conf-enabled/*.conf
Include sites-enabled/*.conf

################################################################################
