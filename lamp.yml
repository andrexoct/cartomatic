---

- name: Apply configuration to all nodes
  sudo: true
  hosts: all
  roles:
    - common
    - fail2ban
    - logrotate

- name: Apply configuration to app nodes
  sudo: true
  hosts: app
  roles:
    - apache/common
#    - php/mod_php
    - postfix
    - ftp

# - name: Apply configuration to frontend nodes
#   sudo: true
#   hosts: fe
#   roles:
#     - nginx/proxy

- name: Apply configuration to database nodes
  sudo: true
  hosts: db
  roles:
    - mysql/common

- name: Apply configuration to nosql nodes
  sudo: true
  hosts: nosql
  roles:
    - redis

- name: Install CS-Cart store
  sudo: true
  hosts: app
  roles:
    - cscart